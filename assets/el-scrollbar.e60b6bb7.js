import{al as D,F as P,am as x,G as O,d as X,M as F,P as q,A as ee,r as n,S as A,x as te,D as B,$ as G,an as W,p as oe,o as E,j as Y,w as Z,ad as le,ae,a as M,W as w,Y as k,ag as se,ao as J,c as Q,k as I,a2 as ne,a9 as L,y as V,B as K,Z as re,m as ie,h as ue,aa as U,ap as ce,g as ve,V as me,e as fe,a0 as de}from"./index.a0744ede.js";var Se=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(Se||{});function be(e){return D(e)&&e.type===P}function he(e){return D(e)&&e.type===x}function Me(e){return D(e)&&!be(e)&&!he(e)}const _=Symbol("scrollbarContextKey"),ye={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},pe=({move:e,size:l,bar:u})=>({[u.size]:l,transform:`translate${u.axis}(${e}%)`}),Ee=O({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),j="Thumb",we=X({name:j,props:Ee,setup(e){const l=F(_),u=q("scrollbar");l||ee(j,"can not inject scrollbar context");const s=n(),i=n(),r=n({}),o=n(!1);let v=!1,S=!1,b=oe?document.onselectstart:null;const a=A(()=>ye[e.vertical?"vertical":"horizontal"]),$=A(()=>pe({size:e.size,move:e.move,bar:a.value})),T=A(()=>s.value[a.value.offset]**2/l.wrapElement[a.value.scrollSize]/e.ratio/i.value[a.value.offset]),g=t=>{var c;if(t.stopPropagation(),t.ctrlKey||[1,2].includes(t.button))return;(c=window.getSelection())==null||c.removeAllRanges(),h(t);const m=t.currentTarget;!m||(r.value[a.value.axis]=m[a.value.offset]-(t[a.value.client]-m.getBoundingClientRect()[a.value.direction]))},z=t=>{if(!i.value||!s.value||!l.wrapElement)return;const c=Math.abs(t.target.getBoundingClientRect()[a.value.direction]-t[a.value.client]),m=i.value[a.value.offset]/2,d=(c-m)*100*T.value/s.value[a.value.offset];l.wrapElement[a.value.scroll]=d*l.wrapElement[a.value.scrollSize]/100},h=t=>{t.stopImmediatePropagation(),v=!0,document.addEventListener("mousemove",H),document.addEventListener("mouseup",p),b=document.onselectstart,document.onselectstart=()=>!1},H=t=>{if(!s.value||!i.value||v===!1)return;const c=r.value[a.value.axis];if(!c)return;const m=(s.value.getBoundingClientRect()[a.value.direction]-t[a.value.client])*-1,d=i.value[a.value.offset]-c,y=(m-d)*100*T.value/s.value[a.value.offset];l.wrapElement[a.value.scroll]=y*l.wrapElement[a.value.scrollSize]/100},p=()=>{v=!1,r.value[a.value.axis]=0,document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",p),f(),S&&(o.value=!1)},C=()=>{S=!1,o.value=!!e.size},R=()=>{S=!0,o.value=v};te(()=>{f(),document.removeEventListener("mouseup",p)});const f=()=>{document.onselectstart!==b&&(document.onselectstart=b)};return B(G(l,"scrollbarElement"),"mousemove",C),B(G(l,"scrollbarElement"),"mouseleave",R),{ns:u,instance:s,thumb:i,bar:a,thumbStyle:$,visible:o,clickTrackHandler:z,clickThumbHandler:g}}});function Te(e,l,u,s,i,r){return E(),Y(se,{name:e.ns.b("fade")},{default:Z(()=>[le(M("div",{ref:"instance",class:w([e.ns.e("bar"),e.ns.is(e.bar.key)]),onMousedown:l[1]||(l[1]=(...o)=>e.clickTrackHandler&&e.clickTrackHandler(...o))},[M("div",{ref:"thumb",class:w(e.ns.e("thumb")),style:k(e.thumbStyle),onMousedown:l[0]||(l[0]=(...o)=>e.clickThumbHandler&&e.clickThumbHandler(...o))},null,38)],34),[[ae,e.always||e.visible]])]),_:1},8,["name"])}var ge=W(we,[["render",Te]]);const ze=O({always:{type:Boolean,default:!0},width:{type:String,default:""},height:{type:String,default:""},ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),He=X({components:{Thumb:ge},props:ze,setup(e){const l=n(0),u=n(0),s=4;return{handleScroll:r=>{if(r){const o=r.offsetHeight-s,v=r.offsetWidth-s;u.value=r.scrollTop*100/o*e.ratioY,l.value=r.scrollLeft*100/v*e.ratioX}},moveX:l,moveY:u}}});function Ne(e,l,u,s,i,r){const o=J("thumb");return E(),Q(P,null,[I(o,{move:e.moveX,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),I(o,{move:e.moveY,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64)}var Ae=W(He,[["render",Ne]]);const Le=O({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ne([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:{type:Boolean,default:!1},minSize:{type:Number,default:20}}),$e={scroll:({scrollTop:e,scrollLeft:l})=>L(e)&&L(l)},Ce=X({name:"ElScrollbar",components:{Bar:Ae},props:Le,emits:$e,setup(e,{emit:l}){const u=q("scrollbar");let s,i;const r=n(),o=n(),v=n(),S=n("0"),b=n("0"),a=n(),$=n(0),T=n(0),g=n(1),z=n(1),h=4,H=A(()=>{const t={};return e.height&&(t.height=V(e.height)),e.maxHeight&&(t.maxHeight=V(e.maxHeight)),[e.wrapStyle,t]}),p=()=>{var t;o.value&&((t=a.value)==null||t.handleScroll(o.value),l("scroll",{scrollTop:o.value.scrollTop,scrollLeft:o.value.scrollLeft}))},C=t=>{!L(t)||(o.value.scrollTop=t)},R=t=>{!L(t)||(o.value.scrollLeft=t)},f=()=>{if(!o.value)return;const t=o.value.offsetHeight-h,c=o.value.offsetWidth-h,m=t**2/o.value.scrollHeight,d=c**2/o.value.scrollWidth,y=Math.max(m,e.minSize),N=Math.max(d,e.minSize);g.value=m/(t-m)/(y/(t-y)),z.value=d/(c-d)/(N/(c-N)),b.value=y+h<t?`${y}px`:"",S.value=N+h<c?`${N}px`:""};return K(()=>e.noresize,t=>{t?(s==null||s(),i==null||i()):({stop:s}=ce(v,f),i=B("resize",f))},{immediate:!0}),K(()=>[e.maxHeight,e.height],()=>{e.native||U(()=>{var t;f(),o.value&&((t=a.value)==null||t.handleScroll(o.value))})}),re(_,ie({scrollbarElement:r,wrapElement:o})),ue(()=>{e.native||U(()=>f())}),{ns:u,scrollbar$:r,wrap$:o,resize$:v,barRef:a,moveX:$,moveY:T,ratioX:z,ratioY:g,sizeWidth:S,sizeHeight:b,style:H,update:f,handleScroll:p,setScrollTop:C,setScrollLeft:R}}});function Re(e,l,u,s,i,r){const o=J("bar");return E(),Q("div",{ref:"scrollbar$",class:w(e.ns.b())},[M("div",{ref:"wrap$",class:w([e.wrapClass,e.ns.e("wrap"),{[e.ns.em("wrap","hidden-default")]:!e.native}]),style:k(e.style),onScroll:l[0]||(l[0]=(...v)=>e.handleScroll&&e.handleScroll(...v))},[(E(),Y(me(e.tag),{ref:"resize$",class:w([e.ns.e("view"),e.viewClass]),style:k(e.viewStyle)},{default:Z(()=>[ve(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?fe("v-if",!0):(E(),Y(o,{key:0,ref:"barRef",height:e.sizeHeight,width:e.sizeWidth,always:e.always,"ratio-x":e.ratioX,"ratio-y":e.ratioY},null,8,["height","width","always","ratio-x","ratio-y"]))],2)}var Be=W(Ce,[["render",Re]]);const ke=de(Be);export{ke as E,Se as P,Me as a,be as i};
