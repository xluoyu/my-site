import{G as W,d as Y,M as J,P as U,A as Q,r as n,S as k,x,D as N,$ as O,am as X,p as _,o as S,j as M,w as F,ad as ee,ae as te,a as R,W as w,Y as A,ag as ae,ai as I,c as q,k as D,F as le,a2 as se,a9 as C,y as j,B as V,Z as oe,m as ne,h as re,aa as G,g as ie,V as ue,e as ce,an as ve,a0 as fe}from"./index.e3dbc8a4.js";const Z=Symbol("scrollbarContextKey"),me={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},de=({move:e,size:l,bar:u})=>({[u.size]:l,transform:`translate${u.axis}(${e}%)`}),he=W({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),K="Thumb",be=Y({name:K,props:he,setup(e){const l=J(Z),u=U("scrollbar");l||Q(K,"can not inject scrollbar context");const o=n(),i=n(),r=n({}),a=n(!1);let v=!1,h=!1,b=_?document.onselectstart:null;const s=k(()=>me[e.vertical?"vertical":"horizontal"]),P=k(()=>de({size:e.size,move:e.move,bar:s.value})),z=k(()=>o.value[s.value.offset]**2/l.wrapElement[s.value.scrollSize]/e.ratio/i.value[s.value.offset]),$=t=>{var c;if(t.stopPropagation(),t.ctrlKey||[1,2].includes(t.button))return;(c=window.getSelection())==null||c.removeAllRanges(),y(t);const f=t.currentTarget;!f||(r.value[s.value.axis]=f[s.value.offset]-(t[s.value.client]-f.getBoundingClientRect()[s.value.direction]))},H=t=>{if(!i.value||!o.value||!l.wrapElement)return;const c=Math.abs(t.target.getBoundingClientRect()[s.value.direction]-t[s.value.client]),f=i.value[s.value.offset]/2,d=(c-f)*100*z.value/o.value[s.value.offset];l.wrapElement[s.value.scroll]=d*l.wrapElement[s.value.scrollSize]/100},y=t=>{t.stopImmediatePropagation(),v=!0,document.addEventListener("mousemove",E),document.addEventListener("mouseup",p),b=document.onselectstart,document.onselectstart=()=>!1},E=t=>{if(!o.value||!i.value||v===!1)return;const c=r.value[s.value.axis];if(!c)return;const f=(o.value.getBoundingClientRect()[s.value.direction]-t[s.value.client])*-1,d=i.value[s.value.offset]-c,g=(f-d)*100*z.value/o.value[s.value.offset];l.wrapElement[s.value.scroll]=g*l.wrapElement[s.value.scrollSize]/100},p=()=>{v=!1,r.value[s.value.axis]=0,document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",p),m(),h&&(a.value=!1)},B=()=>{h=!1,a.value=!!e.size},L=()=>{h=!0,a.value=v};x(()=>{m(),document.removeEventListener("mouseup",p)});const m=()=>{document.onselectstart!==b&&(document.onselectstart=b)};return N(O(l,"scrollbarElement"),"mousemove",B),N(O(l,"scrollbarElement"),"mouseleave",L),{ns:u,instance:o,thumb:i,bar:s,thumbStyle:P,visible:a,clickTrackHandler:H,clickThumbHandler:$}}});function ye(e,l,u,o,i,r){return S(),M(ae,{name:e.ns.b("fade")},{default:F(()=>[ee(R("div",{ref:"instance",class:w([e.ns.e("bar"),e.ns.is(e.bar.key)]),onMousedown:l[1]||(l[1]=(...a)=>e.clickTrackHandler&&e.clickTrackHandler(...a))},[R("div",{ref:"thumb",class:w(e.ns.e("thumb")),style:A(e.thumbStyle),onMousedown:l[0]||(l[0]=(...a)=>e.clickThumbHandler&&e.clickThumbHandler(...a))},null,38)],34),[[te,e.always||e.visible]])]),_:1},8,["name"])}var ge=X(be,[["render",ye]]);const pe=W({always:{type:Boolean,default:!0},width:{type:String,default:""},height:{type:String,default:""},ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Se=Y({components:{Thumb:ge},props:pe,setup(e){const l=n(0),u=n(0),o=4;return{handleScroll:r=>{if(r){const a=r.offsetHeight-o,v=r.offsetWidth-o;u.value=r.scrollTop*100/a*e.ratioY,l.value=r.scrollLeft*100/v*e.ratioX}},moveX:l,moveY:u}}});function we(e,l,u,o,i,r){const a=I("thumb");return S(),q(le,null,[D(a,{move:e.moveX,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),D(a,{move:e.moveY,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64)}var ze=X(Se,[["render",we]]);const $e=W({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:se([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:{type:Boolean,default:!1},minSize:{type:Number,default:20}}),He={scroll:({scrollTop:e,scrollLeft:l})=>C(e)&&C(l)},Ee=Y({name:"ElScrollbar",components:{Bar:ze},props:$e,emits:He,setup(e,{emit:l}){const u=U("scrollbar");let o,i;const r=n(),a=n(),v=n(),h=n("0"),b=n("0"),s=n(),P=n(0),z=n(0),$=n(1),H=n(1),y=4,E=k(()=>{const t={};return e.height&&(t.height=j(e.height)),e.maxHeight&&(t.maxHeight=j(e.maxHeight)),[e.wrapStyle,t]}),p=()=>{var t;a.value&&((t=s.value)==null||t.handleScroll(a.value),l("scroll",{scrollTop:a.value.scrollTop,scrollLeft:a.value.scrollLeft}))},B=t=>{!C(t)||(a.value.scrollTop=t)},L=t=>{!C(t)||(a.value.scrollLeft=t)},m=()=>{if(!a.value)return;const t=a.value.offsetHeight-y,c=a.value.offsetWidth-y,f=t**2/a.value.scrollHeight,d=c**2/a.value.scrollWidth,g=Math.max(f,e.minSize),T=Math.max(d,e.minSize);$.value=f/(t-f)/(g/(t-g)),H.value=d/(c-d)/(T/(c-T)),b.value=g+y<t?`${g}px`:"",h.value=T+y<c?`${T}px`:""};return V(()=>e.noresize,t=>{t?(o==null||o(),i==null||i()):({stop:o}=ve(v,m),i=N("resize",m))},{immediate:!0}),V(()=>[e.maxHeight,e.height],()=>{e.native||G(()=>{var t;m(),a.value&&((t=s.value)==null||t.handleScroll(a.value))})}),oe(Z,ne({scrollbarElement:r,wrapElement:a})),re(()=>{e.native||G(()=>m())}),{ns:u,scrollbar$:r,wrap$:a,resize$:v,barRef:s,moveX:P,moveY:z,ratioX:H,ratioY:$,sizeWidth:h,sizeHeight:b,style:E,update:m,handleScroll:p,setScrollTop:B,setScrollLeft:L}}});function Te(e,l,u,o,i,r){const a=I("bar");return S(),q("div",{ref:"scrollbar$",class:w(e.ns.b())},[R("div",{ref:"wrap$",class:w([e.wrapClass,e.ns.e("wrap"),{[e.ns.em("wrap","hidden-default")]:!e.native}]),style:A(e.style),onScroll:l[0]||(l[0]=(...v)=>e.handleScroll&&e.handleScroll(...v))},[(S(),M(ue(e.tag),{ref:"resize$",class:w([e.ns.e("view"),e.viewClass]),style:A(e.viewStyle)},{default:F(()=>[ie(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?ce("v-if",!0):(S(),M(a,{key:0,ref:"barRef",height:e.sizeHeight,width:e.sizeWidth,always:e.always,"ratio-x":e.ratioX,"ratio-y":e.ratioY},null,8,["height","width","always","ratio-x","ratio-y"]))],2)}var ke=X(Ee,[["render",Te]]);const Pe=fe(ke);export{Pe as E};
